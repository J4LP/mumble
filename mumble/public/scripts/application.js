var mumble;
(function (mumble) {
    'use strict';
    var Notification = (function () {
        function Notification(type, message) {
            this.type = type;
            this.message = message;
        }
        return Notification;
    })();
    mumble.Notification = Notification;
    var NotificationsService = (function () {
        /* @ngInject */
        function NotificationsService($timeout) {
            this.notifications = [];
            this.$timeout = $timeout;
        }
        NotificationsService.prototype.addNotification = function (notification) {
            var _this = this;
            this.notifications.push(notification);
            var last = this.notifications.length - 1;
            this.$timeout(function () {
                _this.notifications.splice(last, 1);
            }, 3500);
        };
        NotificationsService.prototype.getNotifications = function () {
            return this.notifications;
        };
        return NotificationsService;
    })();
    mumble.NotificationsService = NotificationsService;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var RadarStructuresController = (function () {
        /* @ngInject */
        function RadarStructuresController($scope, Restangular, $modal) {
            this.$scope = $scope;
            this.$scope.structures = [];
            this.$scope.events = this;
            this.Restangular = Restangular;
            this.$modal = $modal;
            this.loadStructures();
        }
        RadarStructuresController.prototype.loadStructures = function () {
            var _this = this;
            this.Restangular.all('structures').getList().then(function (objects) {
                _this.$scope.structures = objects;
                if (objects.length > 0) {
                    _this.$scope.lastUpdated = objects[0].updated_on;
                }
                else {
                    _this.$scope.lastUpdated = new Date();
                }
            });
        };
        RadarStructuresController.prototype.openScanModal = function (structure) {
            var _this = this;
            var modalInstance = this.$modal.open({
                templateUrl: 'structure_scan_modal.html',
                controller: 'StructureScanModalController',
                resolve: {
                    structure: function () {
                        return structure;
                    }
                }
            });
            modalInstance.result.then(function () {
                _this.loadStructures();
            });
        };
        return RadarStructuresController;
    })();
    mumble.RadarStructuresController = RadarStructuresController;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var AddStructureController = (function () {
        /* @ngInject */
        function AddStructureController($scope, Restangular, $location, $http) {
            this.$scope = $scope;
            this.$scope.events = this;
            this.Restangular = Restangular;
            this.$location = $location;
            this.$http = $http;
        }
        AddStructureController.prototype.init = function (callback_url) {
            this.callback_url = callback_url;
        };
        AddStructureController.prototype.saveStructure = function () {
            var _this = this;
            console.log('foo');
            this.Restangular.all('structures').post(this.$scope.structure).then(function (structure) {
                window.location.replace(_this.callback_url);
            }, function (error) {
                console.log(error);
                //swal('Error!', data.error ? data.error : 'Unknown server error.', 'error');
            });
        };
        AddStructureController.prototype.getSystem = function (query) {
            return this.$http.post('/api/autocomplete/systems', { query: query }).then(function (response) {
                return response.data.map(function (system) {
                    return system.name;
                });
            });
        };
        AddStructureController.prototype.getEveType = function (query) {
            return this.$http.post('/api/autocomplete/evetypes', { query: query }).then(function (response) {
                return response.data.map(function (system) {
                    return system.name;
                });
            });
        };
        return AddStructureController;
    })();
    mumble.AddStructureController = AddStructureController;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var NotificationsController = (function () {
        /* @ngInject */
        function NotificationsController($scope, NotificationsService) {
            this.$scope = $scope;
            this.$scope.events = this;
            this.NotificationsService = NotificationsService;
            this.$scope.notifications = this.NotificationsService.getNotifications();
            this.$scope.getCSSClass = this.getCSSClass;
        }
        NotificationsController.prototype.closeNotification = function (index) {
            this.$scope.notifications.splice(index, 1);
        };
        NotificationsController.prototype.getCSSClass = function (notification) {
            if (notification.type == 'success') {
                return 'alert-success';
            }
            else if (notification.type == 'warning') {
                return 'alert-warning';
            }
            else if (notification.type == 'danger') {
                return 'alert-danger';
            }
            else {
                return 'alert-info';
            }
        };
        return NotificationsController;
    })();
    mumble.NotificationsController = NotificationsController;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var StructureScanModalController = (function () {
        /* @ngInject */
        function StructureScanModalController($scope, $modalInstance, structure, Restangular) {
            this.$scope = $scope;
            this.$scope.structure = structure;
            this.$scope.editingScan = false;
            this.$scope.events = this;
            this.Restangular = Restangular;
            this.$modalInstance = $modalInstance;
        }
        StructureScanModalController.prototype.saveScan = function () {
            var _this = this;
            this.$scope.structure.customPUT({ 'scan': this.$scope.newScan }, 'scan').then(function () {
                _this.$modalInstance.close();
            });
        };
        return StructureScanModalController;
    })();
    mumble.StructureScanModalController = StructureScanModalController;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var ScansController = (function () {
        /* @ngInject */
        function ScansController($scope, Restangular, $modal) {
            var _this = this;
            this.openNewScanModal = function () {
                var modalInstance = _this.$modal.open({
                    templateUrl: 'new_scan_modal.html',
                    controller: 'NewScanModalController',
                    resolve: {
                        callbackUrl: function () {
                            return _this.callbackUrl;
                        }
                    }
                });
                modalInstance.result.then(function () {
                    _this.loadScans();
                });
            };
            this.$scope = $scope;
            this.$scope.scans = [];
            this.$scope.events = this;
            this.Restangular = Restangular;
            this.$modal = $modal;
            this.loadScans();
        }
        ScansController.prototype.init = function (callbackUrl) {
            this.callbackUrl = callbackUrl.slice(0, -1);
        };
        ScansController.prototype.loadScans = function () {
            var _this = this;
            this.Restangular.all('scans').getList().then(function (objects) {
                _this.$scope.scans = objects;
            });
        };
        return ScansController;
    })();
    mumble.ScansController = ScansController;
})(mumble || (mumble = {}));

var mumble;
(function (mumble) {
    'use strict';
    var NewScanModalController = (function () {
        /* @ngInject */
        function NewScanModalController($scope, $modalInstance, callbackUrl, Restangular) {
            this.$scope = $scope;
            this.$scope.events = this;
            this.Restangular = Restangular;
            this.$modalInstance = $modalInstance;
            this.callbackUrl = callbackUrl;
            console.log(callbackUrl);
        }
        NewScanModalController.prototype.saveScan = function () {
            var _this = this;
            this.Restangular.all('scans').post({ 'raw': this.$scope.rawScan }).then(function (scan) {
                window.location.replace(_this.callbackUrl + scan.id);
            });
        };
        return NewScanModalController;
    })();
    mumble.NewScanModalController = NewScanModalController;
})(mumble || (mumble = {}));

///<reference path="../../../typings/tsd.d.ts" />
///<reference path="services/notifications.service.ts" />
///<reference path="controllers/mumble_structures.controller.ts" />
///<reference path="controllers/add_structure.controller.ts" />
///<reference path="controllers/notifications.controller.ts" />
///<reference path="controllers/structure_scan_modal.controller.ts" />
///<reference path="controllers/scans.controller.ts" />
///<reference path="controllers/new_scan_modal.controller.ts" />
var mumble;
(function (mumble) {
    'use strict';
    var RadarApp = angular.module('mumble', ['restangular', 'ui.bootstrap']).service('NotificationsService', mumble.NotificationsService).controller('RadarStructuresController', mumble.RadarStructuresController).controller('AddStructureController', mumble.AddStructureController).controller('NotificationsController', mumble.NotificationsController).controller('StructureScanModalController', mumble.StructureScanModalController).controller('ScansController', mumble.ScansController).controller('NewScanModalController', mumble.NewScanModalController).config(function (RestangularProvider) {
        RestangularProvider.setBaseUrl('/api');
        RestangularProvider.addResponseInterceptor(function (data, operation, what, url, response, deferred) {
            var extractedData;
            if (operation === 'getList') {
                extractedData = data.objects;
            }
            else {
                extractedData = data;
            }
            return extractedData;
        });
    });
})(mumble || (mumble = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL25vdGlmaWNhdGlvbnMuc2VydmljZS50cyIsImNvbnRyb2xsZXJzL3JhZGFyX3N0cnVjdHVyZXMuY29udHJvbGxlci50cyIsImNvbnRyb2xsZXJzL2FkZF9zdHJ1Y3R1cmUuY29udHJvbGxlci50cyIsImNvbnRyb2xsZXJzL25vdGlmaWNhdGlvbnMuY29udHJvbGxlci50cyIsImNvbnRyb2xsZXJzL3N0cnVjdHVyZV9zY2FuX21vZGFsLmNvbnRyb2xsZXIudHMiLCJjb250cm9sbGVycy9zY2Fucy5jb250cm9sbGVyLnRzIiwiY29udHJvbGxlcnMvbmV3X3NjYW5fbW9kYWwuY29udHJvbGxlci50cyIsImFwcGxpY2F0aW9uLnRzIl0sIm5hbWVzIjpbInJhZGFyIiwicmFkYXIuTm90aWZpY2F0aW9uIiwicmFkYXIuTm90aWZpY2F0aW9uLmNvbnN0cnVjdG9yIiwicmFkYXIuTm90aWZpY2F0aW9uc1NlcnZpY2UiLCJyYWRhci5Ob3RpZmljYXRpb25zU2VydmljZS5jb25zdHJ1Y3RvciIsInJhZGFyLk5vdGlmaWNhdGlvbnNTZXJ2aWNlLmFkZE5vdGlmaWNhdGlvbiIsInJhZGFyLk5vdGlmaWNhdGlvbnNTZXJ2aWNlLmdldE5vdGlmaWNhdGlvbnMiLCJyYWRhci5SYWRhclN0cnVjdHVyZXNDb250cm9sbGVyIiwicmFkYXIuUmFkYXJTdHJ1Y3R1cmVzQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsInJhZGFyLlJhZGFyU3RydWN0dXJlc0NvbnRyb2xsZXIubG9hZFN0cnVjdHVyZXMiLCJyYWRhci5SYWRhclN0cnVjdHVyZXNDb250cm9sbGVyLm9wZW5TY2FuTW9kYWwiLCJyYWRhci5BZGRTdHJ1Y3R1cmVDb250cm9sbGVyIiwicmFkYXIuQWRkU3RydWN0dXJlQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsInJhZGFyLkFkZFN0cnVjdHVyZUNvbnRyb2xsZXIuaW5pdCIsInJhZGFyLkFkZFN0cnVjdHVyZUNvbnRyb2xsZXIuc2F2ZVN0cnVjdHVyZSIsInJhZGFyLkFkZFN0cnVjdHVyZUNvbnRyb2xsZXIuZ2V0U3lzdGVtIiwicmFkYXIuQWRkU3RydWN0dXJlQ29udHJvbGxlci5nZXRFdmVUeXBlIiwicmFkYXIuTm90aWZpY2F0aW9uc0NvbnRyb2xsZXIiLCJyYWRhci5Ob3RpZmljYXRpb25zQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsInJhZGFyLk5vdGlmaWNhdGlvbnNDb250cm9sbGVyLmNsb3NlTm90aWZpY2F0aW9uIiwicmFkYXIuTm90aWZpY2F0aW9uc0NvbnRyb2xsZXIuZ2V0Q1NTQ2xhc3MiLCJyYWRhci5TdHJ1Y3R1cmVTY2FuTW9kYWxDb250cm9sbGVyIiwicmFkYXIuU3RydWN0dXJlU2Nhbk1vZGFsQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsInJhZGFyLlN0cnVjdHVyZVNjYW5Nb2RhbENvbnRyb2xsZXIuc2F2ZVNjYW4iLCJyYWRhci5TY2Fuc0NvbnRyb2xsZXIiLCJyYWRhci5TY2Fuc0NvbnRyb2xsZXIuY29uc3RydWN0b3IiLCJyYWRhci5TY2Fuc0NvbnRyb2xsZXIuaW5pdCIsInJhZGFyLlNjYW5zQ29udHJvbGxlci5sb2FkU2NhbnMiLCJyYWRhci5OZXdTY2FuTW9kYWxDb250cm9sbGVyIiwicmFkYXIuTmV3U2Nhbk1vZGFsQ29udHJvbGxlci5jb25zdHJ1Y3RvciIsInJhZGFyLk5ld1NjYW5Nb2RhbENvbnRyb2xsZXIuc2F2ZVNjYW4iXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sS0FBSyxDQW9DWDtBQXBDRCxXQUFPLEtBQUssRUFBQyxDQUFDO0lBQ1ZBLFlBQVlBLENBQUNBO0lBRWJBLElBQWFBLFlBQVlBO1FBSXJCQyxTQUpTQSxZQUFZQSxDQUlSQSxJQUFJQSxFQUFFQSxPQUFPQTtZQUN0QkMsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFDakJBLElBQUlBLENBQUNBLE9BQU9BLEdBQUdBLE9BQU9BLENBQUNBO1FBQzNCQSxDQUFDQTtRQUNMRCxtQkFBQ0E7SUFBREEsQ0FSQUQsQUFRQ0MsSUFBQUQ7SUFSWUEs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QUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sYUFBYSxHQUFHLElBQUksQ0FBQztZQUN2QixDQUFDO1lBQ0QsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQ0EsQ0FBQUE7QUFDTkEsQ0FBQ0EsRUFsRU0sS0FBSyxLQUFMLEtBQUssUUFrRVgiLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUgcmFkYXIge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb24ge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcblxuICAgICAgICBjb25zdHJ1Y3RvciAodHlwZSwgbWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uc1NlcnZpY2Uge1xuXG4gICAgICAgICR0aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2U7XG4gICAgICAgIG5vdGlmaWNhdGlvbnM6IEFycmF5PE5vdGlmaWNhdGlvbj4gPSBbXTtcblxuICAgICAgICAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgY29uc3RydWN0b3IgKCR0aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuJHRpbWVvdXQgPSAkdGltZW91dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZE5vdGlmaWNhdGlvbiAobm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKG5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgIHZhciBsYXN0ID0gdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB0aGlzLiR0aW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGxhc3QsIDEpO1xuICAgICAgICAgICAgfSwgMzUwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXROb3RpZmljYXRpb25zICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbnM7XG4gICAgICAgIH1cblxuICAgIH1cbn1cbiIsIm1vZHVsZSByYWRhciB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpbnRlcmZhY2UgSVJhZGFyU3RydWN0dXJlc1Njb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcbiAgICBzdHJ1Y3R1cmVzOiBBcnJheTxJU3RydWN0dXJlPjtcbiAgICBsYXN0VXBkYXRlZDogRGF0ZTtcbiAgICBldmVudHM6IFJhZGFyU3RydWN0dXJlc0NvbnRyb2xsZXI7XG4gIH1cblxuICBleHBvcnQgY2xhc3MgUmFkYXJTdHJ1Y3R1cmVzQ29udHJvbGxlciB7XG4gICAgJHNjb3BlOiBJUmFkYXJTdHJ1Y3R1cmVzU2NvcGU7XG4gICAgUmVzdGFuZ3VsYXI6IHJlc3Rhbmd1bGFyLklTZXJ2aWNlO1xuICAgICRtb2RhbDogbmcudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2U7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IElSYWRhclN0cnVjdHVyZXNTY29wZSwgUmVzdGFuZ3VsYXI6IHJlc3Rhbmd1bGFyLklTZXJ2aWNlLCAkbW9kYWw6IG5nLnVpLmJvb3RzdHJhcC5JTW9kYWxTZXJ2aWNlKSB7XG4gICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICAgIHRoaXMuJHNjb3BlLnN0cnVjdHVyZXMgPSBbXTtcbiAgICAgIHRoaXMuJHNjb3BlLmV2ZW50cyA9IHRoaXM7XG4gICAgICB0aGlzLlJlc3Rhbmd1bGFyID0gUmVzdGFuZ3VsYXI7XG4gICAgICB0aGlzLiRtb2RhbCA9ICRtb2RhbDtcbiAgICAgIHRoaXMubG9hZFN0cnVjdHVyZXMoKTtcbiAgICB9XG5cbiAgICBsb2FkU3RydWN0dXJlcygpIHtcbiAgICAgIHRoaXMuUmVzdGFuZ3VsYXIuYWxsKCdzdHJ1Y3R1cmVzJykuZ2V0TGlzdCgpLnRoZW4oXG4gICAgICAgIChvYmplY3RzOiBBcnJheTxJU3RydWN0dXJlPikgPT4ge1xuICAgICAgICAgIHRoaXMuJHNjb3BlLnN0cnVjdHVyZXMgPSBvYmplY3RzO1xuICAgICAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmxhc3RVcGRhdGVkID0gb2JqZWN0c1swXS51cGRhdGVkX29uO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRzY29wZS5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuXG4gICAgb3BlblNjYW5Nb2RhbChzdHJ1Y3R1cmU6IElTdHJ1Y3R1cmUpIHtcbiAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gdGhpcy4kbW9kYWwub3Blbih7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3RydWN0dXJlX3NjYW5fbW9kYWwuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdTdHJ1Y3R1cmVTY2FuTW9kYWxDb250cm9sbGVyJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHN0cnVjdHVyZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RydWN0dXJlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkU3RydWN0dXJlcygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCJtb2R1bGUgcmFkYXIge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaW50ZXJmYWNlIElBZGRTdHJ1Y3R1cmVTY29wZSBleHRlbmRzIG5nLklTY29wZSB7XG4gICAgZXZlbnRzOiBBZGRTdHJ1Y3R1cmVDb250cm9sbGVyO1xuICAgIHN0cnVjdHVyZTogSVN0cnVjdHVyZTtcbiAgICBhZGRTdHJ1Y3R1cmVGb3JtOiBuZy5JRm9ybUNvbnRyb2xsZXI7XG4gIH1cblxuICBleHBvcnQgY2xhc3MgQWRkU3RydWN0dXJlQ29udHJvbGxlciB7XG4gICAgJHNjb3BlOiBJQWRkU3RydWN0dXJlU2NvcGU7XG4gICAgUmVzdGFuZ3VsYXI6IHJlc3Rhbmd1bGFyLklTZXJ2aWNlO1xuICAgICRsb2NhdGlvbjogbmcuSUxvY2F0aW9uU2VydmljZTtcbiAgICAkaHR0cDogbmcuSUh0dHBTZXJ2aWNlO1xuICAgIGNhbGxiYWNrX3VybDogc3RyaW5nO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgY29uc3RydWN0b3IoJHNjb3BlOiBJQWRkU3RydWN0dXJlU2NvcGUsIFJlc3Rhbmd1bGFyOiByZXN0YW5ndWxhci5JU2VydmljZSwgJGxvY2F0aW9uOiBuZy5JTG9jYXRpb25TZXJ2aWNlLCAkaHR0cDogbmcuSUh0dHBTZXJ2aWNlKSB7XG4gICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICAgIHRoaXMuJHNjb3BlLmV2ZW50cyA9IHRoaXM7XG4gICAgICB0aGlzLlJlc3Rhbmd1bGFyID0gUmVzdGFuZ3VsYXI7XG4gICAgICB0aGlzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcbiAgICB9XG5cbiAgICBpbml0KGNhbGxiYWNrX3VybCkge1xuICAgICAgdGhpcy5jYWxsYmFja191cmwgPSBjYWxsYmFja191cmw7XG4gICAgfVxuXG4gICAgc2F2ZVN0cnVjdHVyZSgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdmb28nKTtcbiAgICAgIHRoaXMuUmVzdGFuZ3VsYXIuYWxsKCdzdHJ1Y3R1cmVzJykucG9zdCh0aGlzLiRzY29wZS5zdHJ1Y3R1cmUpLnRoZW4oXG4gICAgICAgIChzdHJ1Y3R1cmU6IElTdHJ1Y3R1cmUpID0+IHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh0aGlzLmNhbGxiYWNrX3VybCk7XG4gICAgICAgIH0sIChlcnJvcjogSUVycm9yUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgLy9zd2FsKCdFcnJvciEnLCBkYXRhLmVycm9yID8gZGF0YS5lcnJvciA6ICdVbmtub3duIHNlcnZlciBlcnJvci4nLCAnZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGdldFN5c3RlbShxdWVyeSkge1xuICAgICAgcmV0dXJuIHRoaXMuJGh0dHAucG9zdCgnL2FwaS9hdXRvY29tcGxldGUvc3lzdGVtcycsIHtxdWVyeTogcXVlcnl9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZTogYW55KSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoc3lzdGVtKSB7XG4gICAgICAgICAgcmV0dXJuIHN5c3RlbS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGdldEV2ZVR5cGUocXVlcnkpIHtcbiAgICAgIHJldHVybiB0aGlzLiRodHRwLnBvc3QoJy9hcGkvYXV0b2NvbXBsZXRlL2V2ZXR5cGVzJywge3F1ZXJ5OiBxdWVyeX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChzeXN0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gc3lzdGVtLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCJtb2R1bGUgcmFkYXIge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGludGVyZmFjZSBJTm90aWZpY2F0aW9uc1Njb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcbiAgICAgICAgbm90aWZpY2F0aW9uczogQXJyYXk8Tm90aWZpY2F0aW9uPjtcbiAgICAgICAgZXZlbnRzOiBOb3RpZmljYXRpb25zQ29udHJvbGxlcjtcbiAgICAgICAgZ2V0Q1NTQ2xhc3M6IEZ1bmN0aW9uO1xuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25zQ29udHJvbGxlciB7XG4gICAgICAgICRzY29wZTogSU5vdGlmaWNhdGlvbnNTY29wZTtcbiAgICAgICAgTm90aWZpY2F0aW9uc1NlcnZpY2U6IE5vdGlmaWNhdGlvbnNTZXJ2aWNlO1xuXG4gICAgICAgIC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IElOb3RpZmljYXRpb25zU2NvcGUsIE5vdGlmaWNhdGlvbnNTZXJ2aWNlOiBOb3RpZmljYXRpb25zU2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgICAgICAgICB0aGlzLiRzY29wZS5ldmVudHMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5Ob3RpZmljYXRpb25zU2VydmljZSA9IE5vdGlmaWNhdGlvbnNTZXJ2aWNlO1xuICAgICAgICAgICAgdGhpcy4kc2NvcGUubm90aWZpY2F0aW9ucyA9IHRoaXMuTm90aWZpY2F0aW9uc1NlcnZpY2UuZ2V0Tm90aWZpY2F0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy4kc2NvcGUuZ2V0Q1NTQ2xhc3MgPSB0aGlzLmdldENTU0NsYXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VOb3RpZmljYXRpb24gKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG5cbiAgICAgICAgZ2V0Q1NTQ2xhc3MgKG5vdGlmaWNhdGlvbjogTm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uLnR5cGUgPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdhbGVydC1zdWNjZXNzJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90aWZpY2F0aW9uLnR5cGUgPT0gJ3dhcm5pbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdhbGVydC13YXJuaW5nJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90aWZpY2F0aW9uLnR5cGUgPT0gJ2RhbmdlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FsZXJ0LWRhbmdlcic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAnYWxlcnQtaW5mbydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIm1vZHVsZSByYWRhciB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBpbnRlcmZhY2UgSVN0cnVjdHVyZVNjYW5Nb2RhbENvbnRyb2xsZXJTY29wZSBleHRlbmRzIG5nLklTY29wZSB7XHJcbiAgICBzdHJ1Y3R1cmU6IElTdHJ1Y3R1cmU7XHJcbiAgICBldmVudHM6IFN0cnVjdHVyZVNjYW5Nb2RhbENvbnRyb2xsZXI7XHJcbiAgICBlZGl0aW5nU2NhbjogYm9vbGVhbjtcclxuICAgIG5ld1NjYW46IHN0cmluZztcclxuICB9XHJcblxyXG4gIGV4cG9ydCBjbGFzcyBTdHJ1Y3R1cmVTY2FuTW9kYWxDb250cm9sbGVyIHtcclxuICAgICRzY29wZTogSVN0cnVjdHVyZVNjYW5Nb2RhbENvbnRyb2xsZXJTY29wZTtcclxuICAgIFJlc3Rhbmd1bGFyOiByZXN0YW5ndWxhci5JU2VydmljZTtcclxuICAgICRtb2RhbEluc3RhbmNlOiBuZy51aS5ib290c3RyYXAuSU1vZGFsU2VydmljZUluc3RhbmNlO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgY29uc3RydWN0b3IoJHNjb3BlOiBJU3RydWN0dXJlU2Nhbk1vZGFsQ29udHJvbGxlclNjb3BlLCAkbW9kYWxJbnN0YW5jZTogbmcudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2VJbnN0YW5jZSwgc3RydWN0dXJlOiBJU3RydWN0dXJlLCBSZXN0YW5ndWxhcjogcmVzdGFuZ3VsYXIuSVNlcnZpY2UpIHtcclxuICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgIHRoaXMuJHNjb3BlLnN0cnVjdHVyZSA9IHN0cnVjdHVyZTtcclxuICAgICAgdGhpcy4kc2NvcGUuZWRpdGluZ1NjYW4gPSBmYWxzZTtcclxuICAgICAgdGhpcy4kc2NvcGUuZXZlbnRzID0gdGhpcztcclxuICAgICAgdGhpcy5SZXN0YW5ndWxhciA9IFJlc3Rhbmd1bGFyO1xyXG4gICAgICB0aGlzLiRtb2RhbEluc3RhbmNlID0gJG1vZGFsSW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVNjYW4oKSB7XHJcbiAgICAgIHRoaXMuJHNjb3BlLnN0cnVjdHVyZS5jdXN0b21QVVQoeydzY2FuJzogdGhpcy4kc2NvcGUubmV3U2Nhbn0sICdzY2FuJykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy4kbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJtb2R1bGUgcmFkYXIge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgaW50ZXJmYWNlIElTY2Fuc1Njb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcclxuICAgIHNjYW5zOiBBcnJheTxJU2Nhbj47XHJcbiAgICBsYXN0VXBkYXRlZDogRGF0ZTtcclxuICAgIGV2ZW50czogU2NhbnNDb250cm9sbGVyO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNsYXNzIFNjYW5zQ29udHJvbGxlciB7XHJcbiAgICAkc2NvcGU6IElTY2Fuc1Njb3BlO1xyXG4gICAgUmVzdGFuZ3VsYXI6IHJlc3Rhbmd1bGFyLklTZXJ2aWNlO1xyXG4gICAgJG1vZGFsOiBuZy51aS5ib290c3RyYXAuSU1vZGFsU2VydmljZTtcclxuICAgIGNhbGxiYWNrVXJsOiBzdHJpbmc7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IElTY2Fuc1Njb3BlLCBSZXN0YW5ndWxhcjogcmVzdGFuZ3VsYXIuSVNlcnZpY2UsICRtb2RhbDogbmcudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2UpIHtcclxuICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgIHRoaXMuJHNjb3BlLnNjYW5zID0gW107XHJcbiAgICAgIHRoaXMuJHNjb3BlLmV2ZW50cyA9IHRoaXM7XHJcbiAgICAgIHRoaXMuUmVzdGFuZ3VsYXIgPSBSZXN0YW5ndWxhcjtcclxuICAgICAgdGhpcy4kbW9kYWwgPSAkbW9kYWw7XHJcbiAgICAgIHRoaXMubG9hZFNjYW5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdChjYWxsYmFja1VybCkge1xyXG4gICAgICB0aGlzLmNhbGxiYWNrVXJsID0gY2FsbGJhY2tVcmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRTY2FucygpIHtcclxuICAgICAgdGhpcy5SZXN0YW5ndWxhci5hbGwoJ3NjYW5zJykuZ2V0TGlzdCgpLnRoZW4oXHJcbiAgICAgICAgKG9iamVjdHM6IEFycmF5PElTY2FuPikgPT4ge1xyXG4gICAgICAgICAgdGhpcy4kc2NvcGUuc2NhbnMgPSBvYmplY3RzO1xyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5OZXdTY2FuTW9kYWwgPSAoKSA9PiB7XHJcbiAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gdGhpcy4kbW9kYWwub3Blbih7XHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICduZXdfc2Nhbl9tb2RhbC5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOiAnTmV3U2Nhbk1vZGFsQ29udHJvbGxlcicsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgY2FsbGJhY2tVcmw6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tVcmw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkU2NhbnMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIm1vZHVsZSByYWRhciB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBpbnRlcmZhY2UgSU5ld1NjYW5Nb2RhbENvbnRyb2xsZXJTY29wZSBleHRlbmRzIG5nLklTY29wZSB7XHJcbiAgICBldmVudHM6IE5ld1NjYW5Nb2RhbENvbnRyb2xsZXI7XHJcbiAgICByYXdTY2FuOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgY2xhc3MgTmV3U2Nhbk1vZGFsQ29udHJvbGxlciB7XHJcbiAgICAkc2NvcGU6IElOZXdTY2FuTW9kYWxDb250cm9sbGVyU2NvcGU7XHJcbiAgICBSZXN0YW5ndWxhcjogcmVzdGFuZ3VsYXIuSVNlcnZpY2U7XHJcbiAgICAkbW9kYWxJbnN0YW5jZTogbmcudWkuYm9vdHN0cmFwLklNb2RhbFNlcnZpY2VJbnN0YW5jZTtcclxuICAgIGNhbGxiYWNrVXJsOiBzdHJpbmc7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IElOZXdTY2FuTW9kYWxDb250cm9sbGVyU2NvcGUsICRtb2RhbEluc3RhbmNlOiBuZy51aS5ib290c3RyYXAuSU1vZGFsU2VydmljZUluc3RhbmNlLCBjYWxsYmFja1VybDogc3RyaW5nLCBSZXN0YW5ndWxhcjogcmVzdGFuZ3VsYXIuSVNlcnZpY2UpIHtcclxuICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgIHRoaXMuJHNjb3BlLmV2ZW50cyA9IHRoaXM7XHJcbiAgICAgIHRoaXMuUmVzdGFuZ3VsYXIgPSBSZXN0YW5ndWxhcjtcclxuICAgICAgdGhpcy4kbW9kYWxJbnN0YW5jZSA9ICRtb2RhbEluc3RhbmNlO1xyXG4gICAgICB0aGlzLmNhbGxiYWNrVXJsID0gY2FsbGJhY2tVcmw7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhbGxiYWNrVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlU2NhbigpIHtcclxuICAgICAgdGhpcy5SZXN0YW5ndWxhci5hbGwoJ3NjYW5zJykucG9zdCh7J3Jhdyc6IHRoaXMuJHNjb3BlLnJhd1NjYW59KS50aGVuKChzY2FuOiBJU2NhbikgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMuY2FsbGJhY2tVcmwgKyBzY2FuLmlkKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJzZXJ2aWNlcy9ub3RpZmljYXRpb25zLnNlcnZpY2UudHNcIiAvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiY29udHJvbGxlcnMvcmFkYXJfc3RydWN0dXJlcy5jb250cm9sbGVyLnRzXCIgLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cImNvbnRyb2xsZXJzL2FkZF9zdHJ1Y3R1cmUuY29udHJvbGxlci50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJjb250cm9sbGVycy9ub3RpZmljYXRpb25zLmNvbnRyb2xsZXIudHNcIiAvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiY29udHJvbGxlcnMvc3RydWN0dXJlX3NjYW5fbW9kYWwuY29udHJvbGxlci50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJjb250cm9sbGVycy9zY2Fucy5jb250cm9sbGVyLnRzXCIgLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cImNvbnRyb2xsZXJzL25ld19zY2FuX21vZGFsLmNvbnRyb2xsZXIudHNcIiAvPlxuXG5tb2R1bGUgcmFkYXIge1xuICAndXNlIHN0cmljdCc7XG5cbiAgZXhwb3J0IGludGVyZmFjZSBJVXNlciB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICB1c2VyX2lkOiBzdHJpbmc7XG4gICAgbWFpbl9jaGFyYWN0ZXI6IHN0cmluZztcbiAgICBjb3Jwb3JhdGlvbjogc3RyaW5nO1xuICAgIGFsbGlhbmNlOiBzdHJpbmc7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIElTdHJ1Y3R1cmUgZXh0ZW5kcyByZXN0YW5ndWxhci5JRWxlbWVudCB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBzeXN0ZW06IHN0cmluZztcbiAgICBwbGFuZXQ6IHN0cmluZztcbiAgICBjb3Jwb3JhdGlvbjogc3RyaW5nO1xuICAgIGFsbGlhbmNlOiBzdHJpbmc7XG4gICAgc3RhbmRpbmc6IG51bWJlcjtcbiAgICBzdGF0dXM6IHN0cmluZztcbiAgICBzY2FuPzogSVNjYW47XG4gICAgYWRkZWRfYnk/OiBJVXNlcjtcbiAgICBjcmVhdGVkX29uOiBEYXRlO1xuICAgIHVwZGF0ZWRfb246IERhdGU7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIElTY2FuUm93IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZXZlX3R5cGU6IHN0cmluZztcbiAgICBldmVfdHlwZV9pZDogbnVtYmVyO1xuICAgIGRpc3RhbmNlOiBzdHJpbmc7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIElTY2FuIGV4dGVuZHMgcmVzdGFuZ3VsYXIuSUVsZW1lbnQge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgcmF3OiBzdHJpbmc7XG4gICAgcGFyc2VkOiBBcnJheTxJU2NhblJvdz47XG4gICAgYWRkZWRfYnk6IElVc2VyO1xuICAgIGNyZWF0ZWRfb246IERhdGU7XG4gICAgdXBkYXRlZF9vbjogRGF0ZTtcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgSUVycm9yUmVzcG9uc2Uge1xuICAgIGVycm9yOiBzdHJpbmc7XG4gIH1cblxuICB2YXIgUmFkYXJBcHAgPSBhbmd1bGFyLm1vZHVsZSgncmFkYXInLCBbJ3Jlc3Rhbmd1bGFyJywgJ3VpLmJvb3RzdHJhcCddKVxuICAgIC5zZXJ2aWNlKCdOb3RpZmljYXRpb25zU2VydmljZScsIE5vdGlmaWNhdGlvbnNTZXJ2aWNlKVxuICAgIC5jb250cm9sbGVyKCdSYWRhclN0cnVjdHVyZXNDb250cm9sbGVyJywgUmFkYXJTdHJ1Y3R1cmVzQ29udHJvbGxlcilcbiAgICAuY29udHJvbGxlcignQWRkU3RydWN0dXJlQ29udHJvbGxlcicsIEFkZFN0cnVjdHVyZUNvbnRyb2xsZXIpXG4gICAgLmNvbnRyb2xsZXIoJ05vdGlmaWNhdGlvbnNDb250cm9sbGVyJywgTm90aWZpY2F0aW9uc0NvbnRyb2xsZXIpXG4gICAgLmNvbnRyb2xsZXIoJ1N0cnVjdHVyZVNjYW5Nb2RhbENvbnRyb2xsZXInLCBTdHJ1Y3R1cmVTY2FuTW9kYWxDb250cm9sbGVyKVxuICAgIC5jb250cm9sbGVyKCdTY2Fuc0NvbnRyb2xsZXInLCBTY2Fuc0NvbnRyb2xsZXIpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1NjYW5Nb2RhbENvbnRyb2xsZXInLCBOZXdTY2FuTW9kYWxDb250cm9sbGVyKVxuXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoUmVzdGFuZ3VsYXJQcm92aWRlcjogcmVzdGFuZ3VsYXIuSVByb3ZpZGVyKSB7XG4gICAgICBSZXN0YW5ndWxhclByb3ZpZGVyLnNldEJhc2VVcmwoJzwlPSBBUElfUk9PVCAlPicpO1xuICAgICAgUmVzdGFuZ3VsYXJQcm92aWRlci5hZGRSZXNwb25zZUludGVyY2VwdG9yKGZ1bmN0aW9uKGRhdGEsIG9wZXJhdGlvbiwgd2hhdCwgdXJsLCByZXNwb25zZSwgZGVmZXJyZWQpIHtcbiAgICAgICAgICAgIHZhciBleHRyYWN0ZWREYXRhO1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2dldExpc3QnKSB7XG4gICAgICAgICAgICAgIGV4dHJhY3RlZERhdGEgPSBkYXRhLm9iamVjdHM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBleHRyYWN0ZWREYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWREYXRhO1xuICAgICAgICAgIH0pO1xuICAgIH0pXG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=